import{r as h,u as S,a as I,m as A,b as E,j as e,c as v,d as L,B as G,e as d,f as x,g as R,s as _,h as b,i as w,k as z,l as B}from"./index-Bc0sp-Bu.js";import{s as D,a as P,R as C}from"./index-3YBXS5g_.js";import{C as f}from"./Col-B8X-5cjH.js";import{P as F}from"./ProductCard-BRAnPN--.js";import{F as K}from"./Form-_xODbCa3.js";const N=h.forwardRef(({bsPrefix:s,active:i,disabled:r,eventKey:o,className:n,variant:l,action:a,as:c,...t},u)=>{s=S(s,"list-group-item");const[m,y]=I({key:A(o,t.href),active:i,...t}),$=E(p=>{if(r){p.preventDefault(),p.stopPropagation();return}m.onClick(p)});r&&t.tabIndex===void 0&&(t.tabIndex=-1,t["aria-disabled"]=!0);const g=c||(a?t.href?"a":"button":"div");return e.jsx(g,{ref:u,...t,...m,onClick:$,className:v(n,s,y.isActive&&"active",r&&"disabled",l&&`${s}-${l}`,a&&`${s}-action`)})});N.displayName="ListGroupItem";const T=N,k=h.forwardRef((s,i)=>{const{className:r,bsPrefix:o,variant:n,horizontal:l,numbered:a,as:c="div",...t}=L(s,{activeKey:"onSelect"}),u=S(o,"list-group");let m;return l&&(m=l===!0?"horizontal":`horizontal-${l}`),e.jsx(G,{ref:i,...t,as:c,className:v(r,u,n&&`${u}-${n}`,m&&`${u}-${m}`,a&&`${u}-numbered`)})});k.displayName="ListGroup";const j=Object.assign(k,{Item:T}),O=()=>{const s=d(D),i=d(P),r=x(),o=n=>{r(_(n))};return h.useEffect(()=>{i&&r(R(i.id))},[i]),e.jsxs("aside",{className:"border p-3",children:[e.jsx("h2",{children:"Shops"}),e.jsx(j,{children:s.map(n=>e.jsx(j.Item,{action:!0,onClick:()=>o(n),children:n.name},n.id))})]})},U=s=>s.products.items,V=()=>{const s=x(),i=d(b),r=o=>{s(w(o))};return e.jsxs(K.Select,{className:"mb-4","aria-label":"Default select example",onChange:o=>r(o.target.value),value:i,children:[e.jsx("option",{value:"no_sorted",children:"No sorted"}),e.jsx("option",{value:"by_price",children:"Sort by price"}),e.jsx("option",{value:"by_date",children:"Sort by add date"})]})},q=()=>{const s=d(U),i=d(z),r=d(P),o=d(b),[n,l]=h.useState([]);return h.useEffect(()=>{let a=s.map(c=>i.find(t=>t.id===c.id)?{...c,fav:1}:{...c,fav:0});o==="by_price"&&(a=[...a].sort((c,t)=>c.price-t.price)),o==="by_date"&&(a=[...a].sort((c,t)=>c.createdAt.localeCompare(t.createdAt))),l([...a].sort((c,t)=>t.fav-c.fav))},[o,r,s]),e.jsxs("section",{className:"border p-3",children:[e.jsx("h2",{children:r&&r.name}),e.jsx(V,{}),e.jsx(C,{children:n.map(a=>e.jsx(f,{children:e.jsx(F,{product:a})},a.id))})]})},X=()=>{const s=x();return h.useEffect(()=>{s(B())},[s]),e.jsx("main",{className:"",children:e.jsxs(C,{children:[e.jsx(f,{md:3,children:e.jsx(O,{})}),e.jsx(f,{children:e.jsx(q,{})})]})})};export{X as default};
