import{r as h,u as S,a as $,m as I,b as A,j as e,c as v,d as E,B as L,e as d,f,g as G,s as w,h as b,i as R,k as _,l as z}from"./index-HkL_h2W0.js";import{R as B}from"./Row-BwJ34-YU.js";import{F as D,C as x}from"./Form-Biz91x59.js";import{s as F,a as N}from"./index-D1usguXa.js";import{P as K}from"./ProductCard-CUWjA1sv.js";import"./Button-g7ijUQUT.js";const P=h.forwardRef(({bsPrefix:s,active:i,disabled:r,eventKey:a,className:n,variant:l,action:o,as:c,...t},u)=>{s=S(s,"list-group-item");const[m,g]=$({key:I(a,t.href),active:i,...t}),k=A(p=>{if(r){p.preventDefault(),p.stopPropagation();return}m.onClick(p)});r&&t.tabIndex===void 0&&(t.tabIndex=-1,t["aria-disabled"]=!0);const y=c||(o?t.href?"a":"button":"div");return e.jsx(y,{ref:u,...t,...m,onClick:k,className:v(n,s,g.isActive&&"active",r&&"disabled",l&&`${s}-${l}`,o&&`${s}-action`)})});P.displayName="ListGroupItem";const T=P,C=h.forwardRef((s,i)=>{const{className:r,bsPrefix:a,variant:n,horizontal:l,numbered:o,as:c="div",...t}=E(s,{activeKey:"onSelect"}),u=S(a,"list-group");let m;return l&&(m=l===!0?"horizontal":`horizontal-${l}`),e.jsx(L,{ref:i,...t,as:c,className:v(r,u,n&&`${u}-${n}`,m&&`${u}-${m}`,o&&`${u}-numbered`)})});C.displayName="ListGroup";const j=Object.assign(C,{Item:T}),O=()=>{const s=d(F),i=d(N),r=f(),a=n=>{r(w(n))};return h.useEffect(()=>{i&&r(G(i.id))},[i]),e.jsxs("aside",{className:"border p-3",children:[e.jsx("h2",{children:"Shops"}),e.jsx(j,{children:s.map(n=>e.jsx(j.Item,{action:!0,onClick:()=>a(n),children:n.name},n.id))})]})},U=s=>s.products.items,V=()=>{const s=f(),i=d(b),r=a=>{s(R(a))};return e.jsxs(D.Select,{className:"mb-4","aria-label":"Default select example",onChange:a=>r(a.target.value),value:i,children:[e.jsx("option",{value:"no_sorted",children:"No sorted"}),e.jsx("option",{value:"by_price",children:"Sort by price"}),e.jsx("option",{value:"by_date",children:"Sort by add date"})]})},q=()=>{const s=d(U),i=d(_),r=d(N),a=d(b),[n,l]=h.useState([]);return h.useEffect(()=>{let o=s.map(c=>i.find(t=>t.id===c.id)?{...c,fav:1}:{...c,fav:0});a==="by_price"&&(o=[...o].sort((c,t)=>c.price-t.price)),a==="by_date"&&(o=[...o].sort((c,t)=>c.createdAt.localeCompare(t.createdAt))),l([...o].sort((c,t)=>t.fav-c.fav))},[a,r,s]),e.jsxs("section",{className:"border p-3",children:[e.jsx("h2",{children:r&&r.name}),e.jsx(V,{}),e.jsx("div",{className:"d-flex flex-wrap gap-3",children:n.map(o=>e.jsx(K,{product:o},o.id))})]})},Y=()=>{const s=f();return h.useEffect(()=>{s(z())},[s]),e.jsx("main",{className:"",children:e.jsxs(B,{children:[e.jsx(x,{md:3,children:e.jsx(O,{})}),e.jsx(x,{children:e.jsx(q,{})})]})})};export{Y as default};
